# CLAUDE.md â€” å–µå–µé‡‘å¹£å±‹ é–‹ç™¼ç­†è¨˜

## ç‰ˆæœ¬ç´€éŒ„

| ç‰ˆæœ¬    | æ—¥æœŸ       | èªªæ˜ |
|---------|------------|------|
| 2.1.3   | 2026-03-01 | æ–°å¢ç´€éŒ„ç·¨è¼¯/åˆªé™¤åŠŸèƒ½ï¼›ç™¼ç¥¨æƒææ–°å¢æ—¥æœŸè¾¨è­˜èˆ‡æ—¥æœŸç·¨è¼¯ |
| 2.1.2   | â€”          | åŸå§‹ç‰ˆæœ¬ |

---

## åŠŸèƒ½èªªæ˜

### ç´€éŒ„ç·¨è¼¯èˆ‡åˆªé™¤ï¼ˆv2.1.3ï¼‰

**ä½ç½®**ï¼š`lib/screens/history_screen.dart`

- åœ¨ã€Œå®Œæ•´ç´€éŒ„ã€é é¢ï¼Œé»æ“Šä»»æ„ä¸€ç­†ç´€éŒ„å³å¯é–‹å•Ÿåº•éƒ¨ç·¨è¼¯é¢æ¿ã€‚
- å¯ä¿®æ”¹æ¬„ä½ï¼š
  - **é‡‘é¡**ï¼ˆç´”æ•¸å­—ï¼‰
  - **é¡å‹**ï¼ˆæ”¶å…¥ / æ”¯å‡ºï¼‰
  - **é¡åˆ¥**ï¼ˆä¾é¡å‹å‹•æ…‹æ›´æ–°é¸é …ï¼‰
  - **å‚™è¨»**
  - **æ—¥æœŸ**ï¼ˆæ—¥æœŸé¸æ“‡å™¨ï¼‰
  - **æ™‚é–“**ï¼ˆæ™‚é–“é¸æ“‡å™¨ï¼‰
- é»æ“Šå³ä¸Šè§’ ğŸ—‘ï¸ åˆªé™¤æŒ‰éˆ•ï¼Œç¢ºèªå¾Œæ°¸ä¹…ç§»é™¤è©²ç­†ç´€éŒ„ã€‚
- å„²å­˜å¾Œè‡ªå‹•é‡æ–°è¨ˆç®—é¤˜é¡ã€å»ºç¯‰ç­‰ç´šç­‰è¡ç”Ÿæ•¸å€¼ã€‚

**ç›¸é—œæ”¹å‹•**ï¼š
- `lib/models/transaction.dart`ï¼š`amount`ã€`category`ã€`type`ã€`note`ã€`createdAt` æ¬„ä½æ”¹ç‚ºå¯ä¿®æ”¹ï¼ˆç§»é™¤ `final`ï¼‰ã€‚
- `lib/providers/app_state.dart`ï¼šæ–°å¢ `updateTransaction()` åŠ `deleteTransaction()` æ–¹æ³•ï¼›`addTransaction()` æ–°å¢å¯é¸åƒæ•¸ `customDate`ã€‚

---

### ç™¼ç¥¨æƒææ—¥æœŸè¾¨è­˜èˆ‡ç·¨è¼¯ï¼ˆv2.1.3ï¼‰

**ä½ç½®**ï¼š`lib/screens/receipt_scan_screen.dart`ã€`lib/utils/receipt_parser_mobile.dart`

- OCR è¾¨è­˜ç™¼ç¥¨æ™‚ï¼Œç¾åœ¨åŒæ™‚å˜—è©¦è¾¨è­˜æ¶ˆè²»æ—¥æœŸã€‚
- æ”¯æ´æ ¼å¼ï¼š
  - è¥¿å…ƒå¹´ï¼š`2025/03/15`ã€`2025-03-15`ã€`2025å¹´03æœˆ15æ—¥`
  - æ°‘åœ‹å¹´ï¼š`114/03/15`ã€`114-03-15`ã€`114å¹´03æœˆ15æ—¥`
- è¾¨è­˜åˆ°çš„æ—¥æœŸæœƒé¡¯ç¤ºã€Œè‡ªå‹•è¾¨è­˜ã€æ¨™ç±¤ï¼Œä¸¦é å¡«åˆ°æ—¥æœŸæ¬„ä½ã€‚
- è‹¥æœªè¾¨è­˜åˆ°æ—¥æœŸï¼Œé è¨­ç‚ºä»Šå¤©ã€‚
- ä½¿ç”¨è€…å¯åœ¨ç¢ºèªé é¢é»æ“Šæ—¥æœŸæ¬„ä½ï¼Œç”¨æ—¥æœŸé¸æ“‡å™¨è‡ªè¡Œä¿®æ”¹ã€‚
- æœ€çµ‚è¨˜å¸³æ™‚ä»¥ä½¿ç”¨è€…ç¢ºèªçš„æ—¥æœŸç‚ºæº–ï¼ˆ`customDate` åƒæ•¸ï¼‰ã€‚

**ç›¸é—œæ”¹å‹•**ï¼š
- `lib/utils/receipt_parser_mobile.dart`ï¼š`ReceiptData` æ–°å¢ `date` æ¬„ä½ï¼›æ–°å¢ `_extractDate()` éœæ…‹æ–¹æ³•ã€‚
- `lib/utils/receipt_parser_stub.dart`ï¼š`ReceiptData` åŒæ­¥æ–°å¢ `date` æ¬„ä½ï¼ˆWeb stubï¼‰ã€‚

---

## æ¶æ§‹æ‘˜è¦

```
lib/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ transaction.dart   # Transaction / TxCategory / Wish è³‡æ–™æ¨¡å‹
â”‚   â””â”€â”€ constants.dart     # é¡åˆ¥æ¸…å–®ã€é…ä»¶å®šç¾©ã€éŠæˆ²å¸¸æ•¸
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ app_state.dart     # å…¨åŸŸç‹€æ…‹ç®¡ç†ï¼ˆProvider + ChangeNotifierï¼‰
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ history_screen.dart      # å®Œæ•´ç´€éŒ„ï¼ˆå«ç·¨è¼¯/åˆªé™¤ï¼‰
â”‚   â”œâ”€â”€ receipt_scan_screen.dart # ç™¼ç¥¨æƒæè¨˜å¸³ï¼ˆå«æ—¥æœŸè¾¨è­˜èˆ‡ç·¨è¼¯ï¼‰
â”‚   â””â”€â”€ ...
â””â”€â”€ utils/
    â”œâ”€â”€ receipt_parser.dart        # æ¢ä»¶åŒ¯å‡ºï¼ˆmobile / stubï¼‰
    â”œâ”€â”€ receipt_parser_mobile.dart # ML Kit OCR å¯¦ä½œï¼ˆiOS/Androidï¼‰
    â”œâ”€â”€ receipt_parser_stub.dart   # Web ä½”ä½å¯¦ä½œ
    â””â”€â”€ version.dart               # ç‰ˆæœ¬è™Ÿå¸¸æ•¸
```

## é–‹ç™¼è¦ç¯„

- æ¯æ¬¡åŠŸèƒ½è®Šæ›´é ˆåŒæ™‚æ›´æ–°ï¼š
  - `lib/utils/version.dart`ï¼ˆ`appVersion`ï¼‰
  - `pubspec.yaml`ï¼ˆ`version: X.Y.Z+N`ï¼‰
  - æœ¬æª”æ¡ˆï¼ˆ`CLAUDE.md`ï¼‰ç‰ˆæœ¬ç´€éŒ„è¡¨æ ¼
- ç‰ˆæœ¬è™Ÿè¦å‰‡ï¼š`major.minor.patch+build`
  - `patch` éå¢ï¼šå°åŠŸèƒ½ã€bug fix
  - `minor` éå¢ï¼šæ–°åŠŸèƒ½æ¨¡çµ„
  - `build` æ¯æ¬¡ç™¼ä½ˆéå¢
